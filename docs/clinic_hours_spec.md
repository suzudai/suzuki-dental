# 診療時間表示・変更機能 仕様書

## 1. 概要
本システムは、鈴木歯科医院のウェブサイトにおいて、日々の診療時間と不定期な診療時間の変更をユーザーに分かりやすく伝えるための機能です。

## 2. コンポーネント仕様

### 2.1 本日の診療時間 (`TodaysClinicHours`)

**配置場所**:
- トップページ「診療時間」セクションのテーブル上部（テープ装飾の位置）

**表示ロジック**:
1.  **マスタデータ参照**: `src/data/scheduleData.js` の `scheduleChanges` 配列を検索し、**当日**の日付と一致するエントリがあるか確認します。
2.  **表示分岐**:
    -   **変更あり (一致するエントリあり)**:
        -   マスタデータに定義された `morning` (午前) と `afternoon` (午後) の時間を表示します。
        -   値が「休診」または「-」の場合は、「**休**」と表示します。
        -   値が「通常通り」の場合は、その曜日の通常の診療時間を表示します。
    -   **通常 (一致するエントリなし)**:
        -   `standardHours` (基本診療時間設定) に基づき、その曜日の診療時間を表示します。
        -   休診日（木・日・祝など）の場合は、「**本日は休診日です**」と表示します。

**デザイン**:
-   **テープ風デザイン**: 白背景に左右のドット線ボーダーを配置し、診療時間表に貼り付けられたテープのような外観。
-   **レイアウト**: 横長配置。「タイトル | 日付 | 午前時間 | 午後時間」の順で表示。
-   **注記**: 「診療時間が変更されています」等の注記は表示しません（ユーザー要望により削除）。

### 2.2 診療時間変更のお知らせ (`ClinicScheduleChange`)

**配置場所**:
-   ニュース詳細ページ（「診療時間の変更について」等の記事内）
-   記事本文の下部に配置。

**表示ロジック**:
-   **月指定フィルタリング**:
    -   ニュース記事データ (`newsData.js`) に `targetMonth` (例: '2025-11') が設定されている場合、その月の変更データのみを抽出して表示します。これにより、過去のニュース記事でも当時の変更情報を正しく表示できます（アーカイブ機能）。
-   **デフォルト動作**:
    -   `targetMonth` が指定されていない場合、**現在日付以降**の全ての変更予定を表示します。

**テーブル仕様**:
-   **日付フォーマット**: `MM/DD(曜日)` (例: 11/23(日))
-   **項目**: 日付、午前、午後、備考
-   **休診強調**: 「休診」のセルは背景色を変更して強調表示します。

## 3. データ構造

### 3.1 スケジュール変更マスタ (`src/data/scheduleData.js`)

不定期な診療時間の変更や休診情報を管理します。

```javascript
export const scheduleChanges = [
    {
        date: '2025-11-23',       // 日付 (YYYY-MM-DD)
        morning: '通常通り',       // 午前の時間 (または '休診', '通常通り')
        afternoon: '14:30 ~ 17:00', // 午後の時間 (または '休診', '通常通り')
        note: '院長研修のため'      // 備考
    },
    // ...
];

**記述ルール (Data Entry Rules)**:

1.  **時間表記の統一**:
    -   必ず**開始時間と終了時間**を記載すること（例: `14:30 ~ 18:00`）。
    -   「18:00まで」「午後休診」のような省略表記は使用しない。
    -   変更がない場合は `通常通り` と記載。
    -   休診の場合は `休診` と記載。

2.  **祝日の扱い**:
    -   本システムには祝日自動判定機能はありません。
    -   **祝日も必ずこのリストに追加し、`休診` として登録してください**。登録がない場合、通常の曜日通りの診療時間が表示されてしまいます。

3.  **備考欄**:
    -   休診の理由（例: 「院長研修のため」「年末年始休診」）などを簡潔に記載。
```

### 3.2 ニュースデータ (`src/data/newsData.js`)

ニュース記事とスケジュール表の連動を管理します。

```javascript
{
    id: '2025-11-01',
    title: '2025年11月の診療時間の変更について',
    hasScheduleTable: true,   // スケジュール表を表示するかどうかのフラグ
    targetMonth: '2025-11',   // 表示対象の月 (YYYY-MM)
    content: `...`            // 記事本文 (導入文のみ)
}
```

## 4. 運用フロー

1.  **診療時間の変更が決まった場合**:
    -   `src/data/scheduleData.js` に新しい変更エントリを追加します。
2.  **お知らせを掲載する場合**:
    -   `src/data/newsData.js` に新しいニュース記事を追加します。
    -   `hasScheduleTable: true` と `targetMonth` を設定します。
    -   これにより、トップページの「本日の診療時間」と、ニュース詳細ページの「変更一覧表」の両方に自動的に反映されます。
